{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(q, page) {\n  \n  const params = new URLSearchParams({\n    key: '53047791-da6bf0178b39a3cb2727ecc21',\n    q,\n    image_type: \"photo\",\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n  \n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  \n  return response.data;\n\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.span-loader');\nconst loadmorebtn = document.querySelector('.form-btn-load');\nconst lightbox = new SimpleLightbox('.gallery-link', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 1,\n});\n\nexport function createGallery(images) {\n    const galleryStr = images\n        .map(image => {\n            return `<li class=\"gallery-item\">\n                        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                        <img\n                            class=\"gallery-img\"\n                            src=\"${image.webformatURL}\"\n                            alt=\"${image.tags}\"\n                        />\n                        <ul class=\"gallery-desc\">\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Likes</span>\n                                <span class=\"gallery-desc-item-value\">${image.likes}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Views</span>\n                                <span class=\"gallery-desc-item-value\">${image.views}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Comments</span>\n                                <span class=\"gallery-desc-item-value\">${image.comments}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Downloads</span>\n                                <span class=\"gallery-desc-item-value\">${image.downloads}</span>\n                            </li>\n                        </ul>\n                        </a>\n                    </li>`})\n        .join(\"\");\n\n    gallery.insertAdjacentHTML('beforeend', galleryStr);    \n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.add('loader');\n}\n\nexport function hideLoader() {    \n    loader.classList.remove('loader');\n}\n\nexport function showLoadMoreButton() {\n    loadmorebtn.classList.add('is-active');\n}\n\nexport function hideLoadMoreButton() {\n    loadmorebtn.classList.remove('is-active');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"/js/pixabay-api\";\nimport * as render from \"/js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.form-btn-load');\n\nlet keyWord;\nlet page;\nlet totaPages;\n\nform.addEventListener('submit', galleryUpd);\nloadMoreBtn.addEventListener('click', galleryLoadMore);\n\nasync function galleryUpd(evt) {\n    evt.preventDefault();\n\n    render.hideLoadMoreButton();\n    render.clearGallery();\n\n    keyWord = evt.target.elements['search-text'].value.trim();\n    page = 1;\n    form.reset();\n\n    if (!(keyWord)) {\n        iziToast.warning({\n            message: \"Sorry, you didn't enter search query. Please try again!\",\n            position: \"topRight\",\n        })\n        return;\n    }    \n\n    try {\n        render.showLoader();\n        const data = await getImagesByQuery(keyWord, page);\n        render.hideLoader();\n\n        if (!data.totalHits) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: \"topRight\",\n            });\n            return;\n        };\n        \n        totaPages = Math.ceil(data.totalHits / 15);        \n\n        render.createGallery(data.hits);\n\n        if (page >= totaPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        render.showLoadMoreButton();       \n\n    } catch (error) {\n        render.hideLoader();\n        iziToast.error({\n            message: 'Sorry, something went wrong. Please try again!',\n            position: \"topRight\",\n        });        \n    };\n}\n\nasync function galleryLoadMore(evt) {   \n    evt.preventDefault();    \n    render.hideLoadMoreButton();\n\n    try {\n        render.showLoader();\n        page++;\n        const data = await getImagesByQuery(keyWord, page);\n        render.hideLoader();\n\n        render.createGallery(data.hits);\n\n        setTimeout(() => {\n                const galleryItem = document.querySelector(\".gallery-item\");\n                const rowHeight = galleryItem.getBoundingClientRect().height;\n\n                window.scrollBy({\n                    top: 2 * rowHeight,\n                    behavior: \"smooth\",\n                });\n            }, 500);\n\n        if (page >= totaPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        render.showLoadMoreButton();        \n\n    } catch (error) {        \n        page--;\n        render.hideLoader();\n        render.showLoadMoreButton();\n        iziToast.error({\n            message: 'Sorry, something went wrong. Please try again!',\n            position: \"topRight\",\n        });        \n    };\n}"],"names":["getImagesByQuery","q","page","params","axios","gallery","loader","loadmorebtn","lightbox","SimpleLightbox","createGallery","images","galleryStr","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","keyWord","totaPages","galleryUpd","galleryLoadMore","evt","render.hideLoadMoreButton","render.clearGallery","iziToast","render.showLoader","data","render.hideLoader","render.createGallery","render.showLoadMoreButton","rowHeight"],"mappings":"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"}