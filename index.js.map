{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"53047791-da6bf0178b39a3cb2727ecc21\";\nconst IMAGES_PER_PAGE = 15;\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  params: {\n    key: API_KEY,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n  },\n});\n\nexport default async function getImagesByQuery(q, page = 1) {\n  try {\n    const response = await api.get(\"\", {\n      params: {\n        q,\n        page,\n        per_page: IMAGES_PER_PAGE,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error.message);\n    return { totalHits: 0, hits: [] };\n  }\n\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.span-loader');\nconst loadMoreBtn = document.querySelector('.form-btn-load');\n\nlet lightbox = null;\n\nexport function initLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n      overlayOpacity: 0.9,\n      animationSpeed: 300,\n      fadeSpeed: 250,\n      close: true,\n      closeText: 'Ã—',\n      enableKeyboard: true,\n      nav: true,\n      doubleTapZoom: 1.5,\n      scrollZoom: false,\n      disableRightClick: true,\n      docClose: true,\n      history: false,\n    });\n  }\n}\n\nexport function createGallery(images) {\n  const galleryMarkup = images\n    .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          <ul class=\"gallery-desc\">\n            <li><span>Likes:</span> ${likes}</li>\n            <li><span>Views:</span> ${views}</li>\n            <li><span>Comments:</span> ${comments}</li>\n            <li><span>Downloads:</span> ${downloads}</li>\n          </ul>\n        </a>\n      </li>\n    `)\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n  if (lightbox) lightbox.refresh();\n  else initLightbox();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.add('loader');\n  loadMoreBtn.disabled = true;\n}\n\nexport function hideLoader() {\n  loader.classList.remove('loader');\n  loadMoreBtn.disabled = false;\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.add('is-active');\n  loadMoreBtn.disabled = false;\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-active');\n  loadMoreBtn.disabled = true;\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"/js/pixabay-api\";\nimport * as render from \"/js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.form-btn-load');\n\nlet keyWord;\nlet page;\nlet totalPages;\n\nconst IMAGES_PER_PAGE = 15;\n\n\nform.addEventListener('submit', galleryUpdate);\nloadMoreBtn.addEventListener('click', galleryLoadMore);\n\n\nfunction showError(message) {\n  iziToast.error({\n    message,\n    position: \"topRight\",\n  });\n}\n\nasync function galleryUpdate(evt) {\n  evt.preventDefault();\n\n  const input = evt.target.elements['search-text'].value.trim();\n  if (!input) {\n    iziToast.warning({\n      message: \"Please enter a search query!\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  keyWord = input;\n  page = 1;\n  form.reset();\n\n  render.hideLoadMoreButton();\n  render.clearGallery();\n\n  try {\n    render.showLoader();\n    const data = await getImagesByQuery(keyWord, page);\n    render.hideLoader();\n\n    if (!data.totalHits) {\n      showError(\"No images found. Try another query.\");\n      return;\n    }\n\n    totalPages = Math.ceil(data.totalHits / IMAGES_PER_PAGE);\n\n    render.createGallery(data.hits);\n\n    if (page < totalPages) render.showLoadMoreButton();\n    else iziToast.info({\n      message: \"End of search results\",\n      position: \"topRight\",\n    });\n\n  } catch (error) {\n    console.error(error);\n    render.hideLoader();\n    showError(\"Something went wrong. Please try again!\");\n  }\n}\n\n\nasync function galleryLoadMore(evt) {\n  evt.preventDefault();\n  render.hideLoadMoreButton();\n  page++;\n\n  try {\n    render.showLoader();\n    const data = await getImagesByQuery(keyWord, page);\n    render.hideLoader();\n\n    render.createGallery(data.hits);\n\n    \n    const lastItem = document.querySelector(\".gallery-item:last-child\");\n    if (lastItem) lastItem.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\n    if (page < totalPages) render.showLoadMoreButton();\n    else iziToast.info({\n      message: \"End of search results\",\n      position: \"topRight\",\n    });\n\n  } catch (error) {\n    console.error(error);\n    page--;\n    render.hideLoader();\n    render.showLoadMoreButton();\n    showError(\"Something went wrong. Please try again!\");\n  }\n}\n"],"names":["BASE_URL","API_KEY","IMAGES_PER_PAGE","api","axios","getImagesByQuery","q","page","error","gallery","loader","loadMoreBtn","lightbox","initLightbox","SimpleLightbox","createGallery","images","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","keyWord","totalPages","galleryUpdate","galleryLoadMore","showError","message","iziToast","evt","input","render.hideLoadMoreButton","render.clearGallery","render.showLoader","data","render.hideLoader","render.createGallery","render.showLoadMoreButton","lastItem"],"mappings":"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"}